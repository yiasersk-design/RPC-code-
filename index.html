<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smart Code Editor</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #000000;
            --bg-color: #ffffff;
            --surface-color: #ffffff;
            --text-color: #000000;
            --border-color: #000000;
            --highlight-color: rgba(255, 235, 59, 0.5); 
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100%;
            width: 100%;
            overflow: hidden; 
            position: fixed;  
            overscroll-behavior: none; 
            -webkit-user-select: none;
            user-select: none;
        }

        .view {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: var(--bg-color);
            transition: transform 0.3s ease-in-out;
            z-index: 1;
            overflow: hidden; 
        }

        .view.hidden {
            transform: translateX(100%);
            pointer-events: none;
        }

        .view.active {
            transform: translateX(0);
        }

        .home-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            justify-content: center;
            overflow-y: auto;
            overscroll-behavior: contain;
        }

        .profile-header {
            display: flex;
            align-items: center; 
            gap: 20px;           
            margin-bottom: 30px;
            width: 100%;
        }

        .avatar-container {
            width: 100px;
            height: 100px;
            border-radius: 10px;        
            overflow: hidden;
            border: 1px solid var(--primary-color);
            position: relative;
            background: #f0f0f0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }

        .avatar-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            background: #000; 
        }

        .welcome-msg {
            font-family: 'Caveat', cursive;
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-color);
            line-height: 1.1;
        }

        .welcome-sub {
            font-family: 'Roboto', sans-serif;
            font-size: 14px;
            color: #666;
            margin-top: 5px;
            display: block;
            font-weight: 400;
        }

        .paste-area {
            width: 100%;
            flex: 1;             
            border: 2px dashed var(--border-color);
            border-radius: 12px;
            background: var(--surface-color);
            padding: 15px;
            font-family: 'Google Sans Mono', monospace;
            font-size: 14px;
            resize: none;
            margin-bottom: 20px;
            color: #000000;
            -webkit-user-select: text;
            user-select: text;
        }

        .btn {
            width: 100%;
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }

        .btn:active {
            transform: scale(0.98);
        }

        /* --- EDITOR STYLES --- */
        .editor-header {
            background: var(--surface-color);
            padding: 10px 15px;
            border-bottom: 1px solid var(--border-color); 
            z-index: 10;
            flex-shrink: 0;
            -webkit-user-select: none;
            user-select: none;
        }

        .toolbar {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .input-group {
            display: flex;
            gap: 8px;
            align-items: flex-start;
        }

        .search-box, .replace-box {
            flex: 1;
            padding: 10px;
            border: 1px solid #000;
            border-radius: 8px;
            font-family: 'Google Sans Mono', monospace;
            font-size: 12px;
            background: #ffffff;
            color: #000000;
            min-height: 40px;
            max-height: 80px;
            resize: vertical;
            -webkit-user-select: text;
            user-select: text;
        }

        .icon-btn {
            background: #ffffff;
            border: 1px solid #000;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            color: #000000;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 40px;
            height: 40px;
        }

        .icon-btn:active {
            background-color: #f0f0f0;
        }

        .icon-btn svg {
            width: 20px;
            height: 20px;
        }

        .editor-body {
            flex: 1;
            position: relative;
            overflow-y: auto;
            overflow-x: hidden;
            background: var(--surface-color);
            padding-bottom: 60px; 
            overscroll-behavior: contain;
        }

        .code-row {
            display: flex;
            width: 100%;
            align-items: stretch;
        }

        .line-num-col {
            width: 45px;
            flex-shrink: 0;
            background: #fff;
            border-right: 1px solid #000;
            text-align: right;
            padding: 4px 8px 4px 2px;
            font-family: 'Google Sans Mono', monospace;
            font-size: 13px;
            line-height: 1.5;
            color: #000;
            -webkit-user-select: none;
            user-select: none;
            cursor: default;
        }

        .line-code-col {
            flex: 1;
            padding: 4px 8px;
            font-family: 'Google Sans Mono', monospace;
            font-size: 13px;
            line-height: 1.5;
            color: #000;
            white-space: pre-wrap;
            word-break: break-all;
            overflow-wrap: break-word;
            -webkit-user-select: text;
            user-select: text;
        }

        .editor-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background: #ffffff;
            border-top: 1px solid #000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            z-index: 20;
            font-family: 'Google Sans Mono', monospace;
            font-size: 12px;
            -webkit-user-select: none;
            user-select: none;
        }

        .stats-info {
            display: flex;
            gap: 15px;
            font-weight: 500;
        }

        .footer-actions {
            display: flex;
            gap: 10px;
        }

        .footer-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            font-family: 'Roboto', sans-serif;
            font-weight: 500;
            font-size: 12px;
            color: #000;
            text-decoration: none;
        }
        
        .footer-btn:active {
            opacity: 0.6;
            transform: scale(0.95);
        }

        mark.highlight {
            background: transparent;
            background-image: linear-gradient(var(--highlight-color), var(--highlight-color));
            background-repeat: no-repeat;
            background-size: 0% 100%;
            border-radius: 4px;
            color: inherit;
            animation: railroadHighlight 0.6s cubic-bezier(0.25, 1, 0.5, 1) forwards;
        }

        @keyframes railroadHighlight {
            from { background-size: 0% 100%; }
            to { background-size: 100% 100%; }
        }

        /* --- POPUP & MODAL STYLES --- */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(2px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            animation: fadeIn 0.2s ease-out;
        }

        .popup-content {
            background: #ffffff;
            width: 90%;
            max-width: 320px;
            padding: 25px 20px;
            border: 1px solid #000; 
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .popup-text {
            font-family: 'Roboto', sans-serif;
            font-size: 15px;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .popup-btn {
            background: #000;
            color: #fff;
            border: none;
            padding: 10px 25px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            font-weight: 500;
        }

        .report-list {
            text-align: left;
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 15px;
            border: 1px solid #eee;
            padding: 10px;
            border-radius: 8px;
            font-size: 12px;
            font-family: 'Roboto', sans-serif;
        }

        .report-item {
            border-bottom: 1px solid #f0f0f0;
            padding: 8px 0;
        }
        .report-item:last-child { border-bottom: none; }
        .report-date { color: #888; font-size: 10px; margin-bottom: 2px; }
        .report-msg { color: #000; }

        .report-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #000;
            border-radius: 8px;
            font-family: 'Roboto', sans-serif;
            margin-bottom: 10px;
            resize: none;
            height: 60px;
            -webkit-user-select: text;
            user-select: text;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .hidden-opt {
            display: none !important;
        }
    </style>
</head>
<body>

    <div id="customPopup" class="popup-overlay hidden-opt" onclick="handlePopupClick(event, 'customPopup')">
        <div class="popup-content">
            <div style="margin-bottom: 10px;">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
            </div>
            <p class="popup-text">ভাই, আগে কিছু লিখো… সার্চ বাটনটা জ্যোতিষী নাকি!</p>
            <button class="popup-btn" onclick="closePopup()">OK</button>
        </div>
    </div>

    <div id="reportModal" class="popup-overlay hidden-opt" onclick="handlePopupClick(event, 'reportModal')">
        <div class="popup-content" style="max-width: 350px;">
            <h3 style="margin-bottom: 15px; font-weight: 700;">User Reports</h3>
            
            <div id="reportList" class="report-list">
                <div style="text-align:center; color:#999;">No reports yet.</div>
            </div>

            <textarea id="newReportInput" class="report-input" placeholder="Write a report..."></textarea>
            
            <div style="display:flex; gap:10px; justify-content:center;">
                <button class="popup-btn" onclick="submitReport()">Submit</button>
                <button class="popup-btn" style="background:#fff; color:#000; border:1px solid #000;" onclick="closePopup()">Close</button>
            </div>
        </div>
    </div>

    <div class="view active" id="homeView">
        <div class="home-container">
            <div class="profile-header">
                <div class="avatar-container">
                    <video id="avatarVideo" class="avatar-video" autoplay loop muted playsinline preload="auto">
                        <source src="https://raw.githubusercontent.com/yiasersk-design/Hi/main/InShot_20260128_185031964.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
                <div>
                    <div class="welcome-msg">Hi, Welcome!</div>
                    <span class="welcome-sub">Ready to code something cool?</span>
                </div>
            </div>

            <h2 style="margin-bottom: 15px; font-weight: 500; color: #000;">Paste Your HTML</h2>
            <textarea id="pasteInput" class="paste-area" placeholder="Paste your code here..."></textarea>
            <button class="btn" onclick="goToEditor()">
                Start Editing
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
            </button>
        </div>
    </div>

    <div class="view hidden" id="editorView">
        <div class="editor-header">
            <div class="toolbar">
                <div class="input-group">
                    <textarea id="searchInput" class="search-box" placeholder="Search..." enterkeyhint="search" oninput="handleSearchInput()" onkeydown="handleEnter(event, 'search')"></textarea>
                    <button class="icon-btn" onclick="performSearch()" title="Search">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    </button>
                    <button class="icon-btn" onclick="toggleReplace()" title="Replace">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                    </button>
                </div>
                <div class="input-group hidden-opt" id="replaceGroup">
                    <textarea id="replaceInput" class="replace-box" placeholder="Replace with..." enterkeyhint="done" onkeydown="handleEnter(event, 'replace')"></textarea>
                    <button class="icon-btn" onclick="performReplace()" title="Apply">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>
                    </button>
                </div>
            </div>
        </div>
        <div class="editor-body" id="editorContainer"></div>
        
        <div class="editor-footer">
            <div class="stats-info">
                <span id="lineCount">Ln: 0</span>
                <span id="charCount">Ch: 0</span>
            </div>
            <div class="footer-actions">
                <button class="footer-btn" onclick="openReportModal()" title="Report">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line></svg>
                </button>
                <a href="https://t.me/YOUR_CHANNEL_LINK" target="_blank" class="footer-btn" title="Telegram">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                </a>
                <button class="footer-btn" onclick="shareCode()" title="Share as File">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>
                </button>
                <button class="footer-btn" onclick="copyAllCode()" title="Copy">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                </button>
                <button class="footer-btn" onclick="goHome()" title="Home">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        let rawCode = "";
        let searchTimeout;

        // --- GLOBAL KEYDOWN LISTENER (Fix Select All) ---
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'a') {
                const activeEl = document.activeElement;
                const activeTag = activeEl.tagName.toLowerCase();
                
                // If focus is inside an input/textarea, let browser handle selection
                if (activeTag === 'textarea' || (activeTag === 'input' && activeEl.type === 'text')) {
                    return; 
                }

                // Else force select ONLY code
                e.preventDefault();
                const editorContainer = document.getElementById('editorContainer');
                if (editorContainer && !document.getElementById('editorView').classList.contains('hidden')) {
                    const range = document.createRange();
                    range.selectNodeContents(editorContainer);
                    const selection = window.getSelection();
                    selection.removeAllRanges();
                    selection.addRange(range);
                }
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const video = document.getElementById('avatarVideo');
            if (video) {
                const playPromise = video.play();
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.log("Autoplay prevented.");
                    });
                }
            }
        });

        window.history.replaceState({ page: 'home' }, 'Home', '');

        window.onpopstate = function(event) {
            const searchPopup = document.getElementById('customPopup');
            const reportPopup = document.getElementById('reportModal');
            
            if (!searchPopup.classList.contains('hidden-opt')) {
                searchPopup.classList.add('hidden-opt');
            }
            if (!reportPopup.classList.contains('hidden-opt')) {
                reportPopup.classList.add('hidden-opt');
            }

            if (event.state && event.state.page === 'editor') {
                showEditorView();
            } else {
                showHomeView();
            }
        };

        function showHomeView() {
            document.getElementById('editorView').classList.remove('active');
            document.getElementById('editorView').classList.add('hidden');
            
            document.getElementById('homeView').classList.remove('hidden');
            document.getElementById('homeView').classList.add('active');
        }

        function showEditorView() {
            document.getElementById('homeView').classList.remove('active');
            document.getElementById('homeView').classList.add('hidden');
            
            document.getElementById('editorView').classList.remove('hidden');
            document.getElementById('editorView').classList.add('active');
        }

        function openSearchPopup() {
            window.history.pushState({ page: 'editor', popup: 'search' }, 'Search Alert', '#alert');
            document.getElementById('customPopup').classList.remove('hidden-opt');
        }

        function closePopup() {
            window.history.back();
        }

        function handlePopupClick(e, id) {
            if (e.target.id === id) {
                closePopup();
            }
        }

        function getFileName() {
            const now = new Date();
            let hours = now.getHours();
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';

            hours = hours % 12;
            hours = hours ? hours : 12; 

            return `Code_${hours}-${minutes}-${seconds}_${ampm}.html`;
        }

        async function shareCode() {
            if (!rawCode) return;

            const fileName = getFileName();
            
            const blob = new Blob([rawCode], { type: 'text/html' });
            const file = new File([blob], fileName, { type: 'text/html' });

            if (navigator.canShare && navigator.canShare({ files: [file] })) {
                try {
                    await navigator.share({
                        files: [file],
                        title: fileName,
                        text: 'Created with Smart Code Editor'
                    });
                } catch (error) {
                    console.log('Sharing failed', error);
                }
            } else {
                if (navigator.share) {
                    navigator.share({
                        title: fileName,
                        text: rawCode
                    });
                } else {
                    copyAllCode();
                    alert("Sharing not supported. Code copied!");
                }
            }
        }

        function openReportModal() {
            renderReports(); 
            window.history.pushState({ page: 'editor', popup: 'report' }, 'Report', '#report');
            document.getElementById('reportModal').classList.remove('hidden-opt');
        }

        function submitReport() {
            const input = document.getElementById('newReportInput');
            const text = input.value.trim();
            
            if (!text) return;

            const reports = JSON.parse(localStorage.getItem('app_reports') || '[]');
            const newReport = {
                text: text,
                date: new Date().toLocaleString()
            };

            reports.unshift(newReport);
            localStorage.setItem('app_reports', JSON.stringify(reports));
            
            input.value = "";
            renderReports();
        }

        function renderReports() {
            const list = document.getElementById('reportList');
            const reports = JSON.parse(localStorage.getItem('app_reports') || '[]');
            
            if (reports.length === 0) {
                list.innerHTML = '<div style="text-align:center; color:#999;">No reports yet.</div>';
                return;
            }

            let html = "";
            reports.forEach(report => {
                html += `
                    <div class="report-item">
                        <div class="report-date">${report.date}</div>
                        <div class="report-msg">${escapeHtml(report.text)}</div>
                    </div>
                `;
            });
            list.innerHTML = html;
        }

        function goToEditor() {
            const pasteVal = document.getElementById('pasteInput').value;
            if (!pasteVal.trim()) return;

            rawCode = pasteVal;
            window.history.pushState({ page: 'editor' }, 'Editor', '#editor');
            showEditorView();
            renderCode(rawCode);
        }

        function goHome() {
            window.history.back();
        }

        function handleEnter(event, type) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                if (type === 'search') {
                    performSearch();
                    document.getElementById('searchInput').blur();
                } else if (type === 'replace') {
                    performReplace();
                    document.getElementById('replaceInput').blur();
                }
            }
        }

        // --- NEW DEBOUNCE SEARCH LOGIC ---
        function handleSearchInput() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(performSearch, 300); // 300ms delay to prevent freeze
        }

        function performSearch() {
            const searchVal = document.getElementById('searchInput').value;
            
            // Allow empty search to reset view
            if (!searchVal) {
                renderCode(rawCode);
                return;
            }

            const index = rawCode.indexOf(searchVal);
            if (index !== -1) {
                renderCode(rawCode, { start: index, end: index + searchVal.length });
            } else {
                renderCode(rawCode);
            }
        }

        function renderCode(code, highlightRange = null) {
            const container = document.getElementById('editorContainer');
            container.innerHTML = ""; 

            const lines = code.split('\n');
            document.getElementById('lineCount').innerText = `Ln: ${lines.length}`;
            document.getElementById('charCount').innerText = `Ch: ${code.length}`;

            let charAccumulator = 0; 
            let htmlBuilder = "";

            lines.forEach((line, index) => {
                const lineStart = charAccumulator;
                const lineEnd = charAccumulator + line.length;
                let lineContentHtml = "";
                const escapedLine = escapeHtml(line);

                if (highlightRange && lineEnd > highlightRange.start && lineStart < highlightRange.end) {
                    const relStart = Math.max(0, highlightRange.start - lineStart);
                    const relEnd = Math.min(line.length, highlightRange.end - lineStart);
                    const part1 = escapeHtml(line.substring(0, relStart));
                    const partMark = escapeHtml(line.substring(relStart, relEnd));
                    const part2 = escapeHtml(line.substring(relEnd));
                    lineContentHtml = `${part1}<mark class="highlight" id="${index === 0 ? 'focusTarget' : ''}">${partMark}</mark>${part2}`;
                } else {
                    lineContentHtml = escapedLine;
                }
                
                if(lineContentHtml === "") lineContentHtml = "&#8203;"; 
                const rowId = (highlightRange && lineStart <= highlightRange.start && lineEnd >= highlightRange.start) ? 'id="scrollTarget"' : '';

                htmlBuilder += `
                    <div class="code-row" ${rowId}>
                        <div class="line-num-col">${index + 1}</div>
                        <div class="line-code-col">${lineContentHtml}</div>
                    </div>
                `;
                charAccumulator += line.length + 1; 
            });

            container.innerHTML = htmlBuilder;

            if (highlightRange) {
                setTimeout(() => {
                    const target = document.getElementById('scrollTarget');
                    if(target) {
                        target.scrollIntoView({behavior: "smooth", block: "center"});
                    }
                }, 100);
            }
        }

        function escapeHtml(text) {
            return text
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        function toggleReplace() {
            const group = document.getElementById('replaceGroup');
            group.classList.toggle('hidden-opt');
        }

        function performReplace() {
            const searchVal = document.getElementById('searchInput').value;
            const replaceVal = document.getElementById('replaceInput').value;

            if (!searchVal) return; 

            if (rawCode.indexOf(searchVal) !== -1) {
                rawCode = rawCode.replace(searchVal, replaceVal);
                renderCode(rawCode);
            }
        }

        function copyAllCode() {
            if (!rawCode) return;
            navigator.clipboard.writeText(rawCode).then(() => {
                // No Alert
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }
    </script>
</body>
</html>
